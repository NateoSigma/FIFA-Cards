<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Otwieranie paczek pi≈Çkarskich</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #0a3d62;
      color: white;
      margin: 0;
      padding: 0;
    }
    h1 {
      margin-top: 20px;
    }
#battleContainer h2 {
  width: 100%;
  text-align: center;
  margin-top: 20px;
  font-size: 28px;
}

#battleInventory .card {
  position: relative;
  width: 160px;
  height: 240px;
}

#battleInventory .btn {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
}
    .buttons {
      margin-top: 20px;
    }
    .btn {
      background: gold;
      border: none;
      padding: 15px 30px;
      font-size: 20px;
      border-radius: 10px;
      cursor: pointer;
      margin: 10px;
    }
    .cards-container, .inventory-container, .shop-container {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    .card {
      width: 150px;
      height: 220px;
      border: 2px solid white;
      border-radius: 10px;
      background: #1e272e;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      font-size: 14px;
      padding: 5px;
    }
    .card img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 8px;
      margin-top: 5px;
    }
    .screen {
      display: none;
      width: 100%;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
      background: #0a3d62;
      overflow-y: auto;
    }
    .screen.active {
      display: block;
    }
  </style>
</head>
<body>

  <!-- MENU -->
  <div id="menuScreen" class="screen active">
    <h1>‚öΩ Otwieranie paczek kart pi≈Çkarskich</h1>
    <h2 id="coinDisplay">üíµ 0</h2>
    <div class="buttons">
      <button class="btn" onclick="showShop()">üõí Sklep</button>
      <button class="btn" onclick="showInventory()">üì¶ Inventory</button>
      <button class="btn" onclick="resetInventory()">üîÑ Reset gry</button>
      <button class="btn" onclick="showBattle()">‚öî Tryb Pojedynk√≥w</button>
    </div>
    <div class="cards-container" id="cardsContainer"></div>
  </div>

  <!-- INVENTORY -->
  <div id="inventoryScreen" class="screen">
    <h1>üì¶ Inventory</h1>
    <div class="inventory-container" id="inventoryContainer"></div>
    <button class="btn" onclick="returnToMenu()">‚¨Ö Powr√≥t do menu</button>
  </div>

  <!-- SHOP -->
  <div id="shopScreen" class="screen">
    <h1>üõí Sklep z paczkami</h1>
    <div class="shop-container" id="shopContainer"></div>
    <button class="btn" onclick="returnToMenu()">‚¨Ö Powr√≥t do menu</button>
  </div>

<!-- BATTLE -->
<div id="battleScreen" class="screen">
  <h1>‚öî Tryb Pojedynk√≥w</h1>
  <h2 id="coinDisplayBattle">üíµ 0</h2>
  <div id="battleInventory" class="inventory-container"></div>
  <div id="battleContainer" style="display:flex; justify-content:center; gap:30px; margin-top:30px;"></div>
  <button class="btn" onclick="returnToMenu()">‚¨Ö Powr√≥t do menu</button>
</div>

  <script>
const cards = {
  vinicius: {img: "Vinicius.png", name: "Vinicius", power: 16},
  miros: {img: "Miros.png", name: "Miros", power: 24},
  macron: {img: "Macron.png", name: "Macron", power: 25},
  chaladaj: {img: "Cha≈Çadaj.png", name: "Cha≈Çadaj", power: 40},
  enzzi: {img: "Enzzi.png", name: "Enzzi", power: 42},
  mentzen: {img: "Mentzen.png", name: "Mentzen", power: 43},
  holownia: {img: "Ho≈Çownia.png", name: "Ho≈Çownia", power: 43},
  biden: {img: "Biden.png", name: "Biden", power: 50},
  mbappe: {img: "Mbapp√©.png", name: "Mbapp√©", power: 54},
  arquel: {img: "Arquel.png", name: "Arquel", power: 54},
  ronaldo: {img: "Ronaldo.png", name: "Ronaldo", power: 56},
  kumpel: {img: "Kumpel.png", name: "Kumpel", power: 56},
  lewandowski: {img: "Lewandowski.png", name: "Lewandowski", power: 58},
  messi: {img: "Messi.png", name: "Messi", power: 58},
  scholz: {img: "Scholz.png", name: "Scholz", power: 58},
  doue: {img: "Dou√©.png", name: "Dou√©", power: 61},
  neymar: {img: "Neymar.png", name: "Neymar", power: 65},
  trump: {img: "Trump.png", name: "Trump", power: 65},
  braln: {img: "Bra≈Çn.png", name: "Bra≈Çn", power: 68},
  wojan: {img: "Wojan.png", name: "Wojan", power: 68},
  palion: {img: "Palion.png", name: "Palion", power: 68},
  putin: {img: "Putin.png", name: "Putin", power: 69},
  szefcu: {img: "Szefcu.png", name: "Szefcu", power: 72},
  trzaskowski: {img: "Trzaskowski.png", name: "Trzaskowski", power: 79},
  nawrocki: {img: "Nawrocki.png", name: "Nawrocki", power: 81},
  eleven: {img: "Eleven.png", name: "Eleven", power: 85},
  tusk: {img: "Tusk.png", name: "Tusk", power: 86},
  dizzowsky: {img: "Dizzowsky.png", name: "Dizzowsky", power: 86},
  jasper: {img: "Jasper.png", name: "Jasper", power: 91},
  jose: {img: "Arkadiojosze.png", name: "Jose", power: 98}
};

    // Paczki z r√≥≈ºnymi % drop√≥w
    const packs = {
      paczka1: {
        name: "Paczka",
        pool: [
          {card: cards.jose, chance: 0.01},
          {card: cards.nawrocki, chance: 0.05},
          {card: cards.trzaskowski, chance: 0.24},
          {card: cards.putin, chance: 0.7},
          {card: cards.messi, chance: 3},
          {card: cards.lewandowski, chance: 3},
          {card: cards.ronaldo, chance: 8},
          {card: cards.biden, chance: 15},
          {card: cards.mentzen, chance: 20},
          {card: cards.macron, chance: 50}
        ]
      },
      
      paczka2: {
        name: "Paczka",
        pool: [
          {card: cards.vinicius, chance: 45},
          {card: cards.enzzi, chance: 25},
          {card: cards.holownia, chance: 10},
          {card: cards.trump, chance: 5},
          {card: cards.braln, chance: 5},
          {card: cards.wojan, chance: 5},
          {card: cards.palion, chance: 3},
          {card: cards.szefcu, chance: 1.6},
          {card: cards.tusk, chance: 0.39},
          {card: cards.jasper, chance: 0.01}
        ]
      },
      
      paczka3: {
        name: "Paczka",
        pool: [
          {card: cards.dizzowsky, chance: 0.05},
          {card: cards.eleven, chance: 0.06},
          {card: cards.neymar, chance: 0.89},
          {card: cards.doue, chance: 1},
          {card: cards.scholz, chance: 2},
          {card: cards.kumpel, chance: 3},
          {card: cards.arquel, chance: 9},
          {card: cards.mbappe, chance: 9},
          {card: cards.chaladaj, chance: 25},
          {card: cards.miros, chance: 50}
        ]
      }
    };
    
const packPrices = {
  paczka1: 100,
  paczka2: 100,
  paczka3: 100
};

let inventory = {};
let savedCoins = localStorage.getItem("coins");
let coins = savedCoins !== null ? parseInt(savedCoins) : 1000;

window.onload = () => {
  const savedInventory = localStorage.getItem("inventory");
  if (savedInventory) inventory = JSON.parse(savedInventory);
  updateCoinsDisplay();
  renderInventory(); 
};

function updateCoinsDisplay() {
  const displays = document.querySelectorAll("#coinDisplay, #coinDisplayBattle");
  displays.forEach(el => {
    if (el) el.textContent = "üíµ " + coins;
  });
  localStorage.setItem("coins", coins);
}

    function showInventory() {
      document.getElementById("menuScreen").classList.remove("active");
      document.getElementById("inventoryScreen").classList.add("active");
      renderInventory();
    }

    function showShop() {
      document.getElementById("menuScreen").classList.remove("active");
      document.getElementById("shopScreen").classList.add("active");
      renderShop();
    }

    function returnToMenu() {
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      document.getElementById("menuScreen").classList.add("active");
    }

    function renderInventory() {
      const inv = document.getElementById("inventoryContainer");
      inv.innerHTML = "";
      for (let card in inventory) {
        const cardDiv = document.createElement("div");
        cardDiv.classList.add("card");

        const img = document.createElement("img");
        img.src = card;

        const count = document.createElement("div");
        count.textContent = "x" + inventory[card];

        cardDiv.appendChild(img);
        cardDiv.appendChild(count);
        inv.appendChild(cardDiv);
      }
    }

function renderShop() {
  const shop = document.getElementById("shopContainer");
  shop.innerHTML = `<h2>Masz: üíµ ${coins}</h2>`;

  for (let packKey in packs) {
    const pack = packs[packKey];
    const btn = document.createElement("button");
    btn.classList.add("btn");
    btn.textContent = `${pack.name} - üíµ ${packPrices[packKey]}`;
    btn.onclick = () => {
      if (coins >= packPrices[packKey]) {
        coins -= packPrices[packKey];
        localStorage.setItem("coins", coins);
        updateCoinsDisplay();
        renderShop(); 
        openPack(pack);
      } else {
        alert("Nie masz wystarczajƒÖco üíµ!");
      }
    };
    shop.appendChild(btn);
  }
}

function animatePackOpen(callback) {
  const container = document.getElementById("cardsContainer");
  container.innerHTML = "<h2>üéÅ Otwieranie paczki...</h2>";
  let dots = 0;
  const loading = setInterval(() => {
    dots = (dots + 1) % 4;
    container.querySelector("h2").textContent = "üéÅ Otwieranie paczki" + ".".repeat(dots);
  }, 400);
  setTimeout(() => {
    clearInterval(loading);
    callback();
  }, 2000);
}

function openPack(pack) {
  const container = document.getElementById("cardsContainer");
  returnToMenu();
  animatePackOpen(() => {
    container.innerHTML = "";
    for (let i = 0; i < 3; i++) {
      const card = getRandomCard(pack.pool);
      addToInventory(card.img);
      const cardDiv = document.createElement("div");
      cardDiv.classList.add("card");
      const img = document.createElement("img");
      img.src = card.img;
      const label = document.createElement("div");
      label.textContent = card.name;
      cardDiv.appendChild(img);
      cardDiv.appendChild(label);
      container.appendChild(cardDiv);
    }
    updateCoinsDisplay();
  });
}

    function getRandomCard(pool) {
      const total = pool.reduce((sum, item) => sum + item.chance, 0);
      let rand = Math.random() * total;
      for (let item of pool) {
        if (rand < item.chance) {
          return item.card;
        }
        rand -= item.chance;
      }
      return pool[pool.length - 1].card;
    }

function showBattle() {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById("battleScreen").classList.add("active");
  renderBattleInventory();
  updateCoinsDisplay();
  document.getElementById("coinDisplayBattle").textContent = "üíµ " + coins;
}

function renderBattleInventory() {
  const container = document.getElementById("battleInventory");
  container.innerHTML = "<h3>Wybierz kartƒô do walki:</h3>";

  for (let cardImg in inventory) {
    const cardData = Object.values(cards).find(c => c.img === cardImg);
    if (!cardData) continue;

    const cardDiv = document.createElement("div");
    cardDiv.classList.add("card");
    cardDiv.innerHTML = `
      <img src="${cardData.img}">
      <div>${cardData.name}</div>
      <div>Power: ${cardData.power}</div>
      <button class="btn" style="padding:5px; font-size:14px;">Walcz</button>
    `;

    cardDiv.querySelector("button").onclick = () => startBattle(cardData);
    container.appendChild(cardDiv);
  }
}

function startBattle(playerCard) {
  const container = document.getElementById("battleContainer");
  container.innerHTML = "";

  // losuj kartƒô przeciwnika
  const opponentKeys = Object.keys(cards);
  const opponentCard = cards[opponentKeys[Math.floor(Math.random() * opponentKeys.length)]];

  // wy≈õwietl karty
  const playerDiv = document.createElement("div");
  playerDiv.classList.add("card");
  playerDiv.innerHTML = `<h3>Ty</h3><img src="${playerCard.img}"><p>${playerCard.name}</p><p>Power: ${playerCard.power}</p>`;

  const opponentDiv = document.createElement("div");
  opponentDiv.classList.add("card");
  opponentDiv.innerHTML = `<h3>Przeciwnik</h3><img src="${opponentCard.img}"><p>${opponentCard.name}</p><p>Power: ${opponentCard.power}</p>`;

  container.appendChild(playerDiv);
  container.appendChild(opponentDiv);

  // wynik walki
  let resultText = "";

  if (playerCard.power > opponentCard.power) {
    // wygrana ‚Äì nagroda = power karty
    const reward = playerCard.power;
    coins += reward;
    resultText = `üèÜ Wygra≈Çe≈õ! Otrzymujesz +${reward}üíµ`;
  } else if (playerCard.power < opponentCard.power) {
    // przegrana ‚Äì tracisz 1 sztukƒô tej karty
    if (inventory[playerCard.img] > 1) {
      inventory[playerCard.img]--;
    } else {
      delete inventory[playerCard.img];
    }
    resultText = `‚ùå Przegra≈Çe≈õ! Straci≈Çe≈õ jednƒÖ kartƒô (${playerCard.name}) üò¢`;
  } else {
    resultText = "ü§ù Remis! Nic nie tracisz ani nie zyskujesz.";
  }

  // pokaz wynik
  const resultDiv = document.createElement("div");
  resultDiv.innerHTML = `<h2>${resultText}</h2>`;
  container.appendChild(resultDiv);

  // zapis danych
  localStorage.setItem("inventory", JSON.stringify(inventory));
  localStorage.setItem("coins", coins);
  updateCoinsDisplay();

  // od≈õwie≈º listƒô kart po chwili
  setTimeout(renderBattleInventory, 1500);
}

function addToInventory(cardImg) {
  inventory[cardImg] = (inventory[cardImg] || 0) + 1;
  localStorage.setItem("inventory", JSON.stringify(inventory));
}

function resetInventory() {
  if (confirm("Czy na pewno chcesz zresetowaƒá ca≈ÇƒÖ grƒô? üò¢ Wszystkie karty i monety zostanƒÖ utracone!")) {
    inventory = {};
    coins = 1000;

    localStorage.setItem("inventory", JSON.stringify(inventory));
    localStorage.setItem("coins", coins);

    renderInventory();
    updateCoinsDisplay();

    document.getElementById("battleContainer").innerHTML = "";
    document.getElementById("cardsContainer").innerHTML = "";

    returnToMenu();

    alert("‚úÖ Gra zosta≈Ça zresetowana! Otrzymujesz 1000 üíµ na start.");
  }
}

  </script>
</body>
</html>